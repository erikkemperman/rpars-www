(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"2c9M":function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return a})),r.d(e,"e",(function(){return c}));const i={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const e=this.getEngine();if(!e)return;const r=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:r})},notification(t){const e=this.getEngine();if(!e)return;const r=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:r})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},n=()=>{i.selection()},s=()=>{i.selectionStart()},o=()=>{i.selectionChanged()},c=()=>{i.selectionEnd()},a=t=>{i.impact(t)}},"6i10":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));const i={bubbles:{dur:1e3,circles:9,fn:(t,e,r)=>{const i=t*e/r-t+"ms",n=2*Math.PI*e/r;return{r:5,style:{top:9*Math.sin(n)+"px",left:9*Math.cos(n)+"px","animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(t,e,r)=>{const i=e/r,n=t*i-t+"ms",s=2*Math.PI*i;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":n}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,e,r)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/r-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,e,r)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/r-t+"ms"}})}}},NcIQ:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var i=r("mrSG"),n=r("gcOT"),s=r("fXoL"),o=function(t){return t.USER_CREDENTIALS="credentials",t.SESSION_ID="session_id",t.SESSION_EXPIRATION="session_expiration",t.ADMIN="admin",t}({});let c=(()=>{class t{constructor(){}fetch(t){return Object(i.a)(this,void 0,void 0,(function*(){const e=yield n.b.get({key:"settings."+t});return JSON.parse(e.value)}))}fetchSecure(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.fetch(t)}))}store(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const r=JSON.stringify(e);yield n.b.set({key:"settings."+t,value:r})}))}storeSecure(t,e){return Object(i.a)(this,void 0,void 0,(function*(){JSON.stringify(e),this.store(t,e)}))}fetchSessionId(){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.fetch(o.SESSION_ID)}))}storeSessionId(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.store(o.SESSION_ID,t)}))}fetchSessionExpiration(){return Object(i.a)(this,void 0,void 0,(function*(){return parseInt(yield this.fetch(o.SESSION_EXPIRATION))}))}storeSessionExpiration(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.store(o.SESSION_EXPIRATION,t.toString())}))}fetchAdmin(){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.fetch(o.ADMIN)}))}storeAdmin(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.store(o.ADMIN,t)}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},NqGI:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n}));const i=async(t,e,r,i,n)=>{if(t)return t.attachViewToDom(e,r,n,i);if("string"!=typeof r&&!(r instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof r?e.ownerDocument&&e.ownerDocument.createElement(r):r;return i&&i.forEach(t=>s.classList.add(t)),n&&Object.assign(s,n),e.appendChild(s),s.componentOnReady&&await s.componentOnReady(),s},n=(t,e)=>{if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},PLN7:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r("mrSG"),n=r("tk/3"),s=r("AytR"),o=r("fXoL"),c=r("NcIQ");let a=(()=>{class t{constructor(t,e){this.httpClient=t,this.settingsStoreService=e}post(t,e){return Object(i.a)(this,void 0,void 0,(function*(){let r=null,i=s.a.HTTP_RETRY_LIMIT,o=0;for(;;){i-=1;try{const i=(yield this.settingsStoreService.fetchSessionId())||"";let o;if(r=yield this.httpClient.post(s.a.API_URL_BASE+t,e,{headers:(new n.c).set("Authorization",i)}).toPromise(),r.expiration){if(o=r.expiration||-1,"number"!=typeof o||Math.round(o)!==o||o<0)throw new Error("Bad server response: illegal session expiration");o+=Date.now(),yield this.settingsStoreService.storeSessionExpiration(o)}else o=Date.now()+s.a.SESSION_EXPIRATION,yield this.settingsStoreService.storeSessionExpiration(o);return r}catch(c){if((0===c.status||429===c.status||503===c.status)&&(0===c.status?(c.statusText="It looks like the server is down",o=s.a.HTTP_SERVER_DOWN_SLEEP):429===c.status?(c.statusText="The server is too busy at the moment",o=parseInt(yield c.headers.get("Retry-After"))+1):503===c.status&&(c.statusText="The server was just restarted, please retry",o=15),i>0)){console.log(`Server busy or down, try again in ${o} seconds`),yield new Promise(t=>setTimeout(t,1e3*o));continue}throw c}}}))}sessionLoginInit(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("session_login_init",t)}))}sessionLoginFini(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("session_login_fini",t)}))}sessionLogout(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("session_logout",t)}))}memberGet(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("member_get",t)}))}memberGetProject(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("member_project_get",t)}))}memberGetGroup(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("member_group_get",t)}))}memberGetUser(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("member_user_get",t)}))}memberGetUnassignedUser(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("member_user_unassigned_get",t)}))}memberAddUsers(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("member_add_users",t)}))}removeUser(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("member_remove_user",t)}))}getScript(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("script_get",t)}))}getGroupScript(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("script_group_get",t)}))}putScript(t){return Object(i.a)(this,void 0,void 0,(function*(){return yield this.post("script_put",t)}))}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(n.a),o.Qb(c.a))},t.\u0275prov=o.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"U/uv":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var i=r("sxy2"),n=r("ItpF"),s=r("2c9M");const o=(t,e)=>{let r,o;const c=(t,i,n)=>{if("undefined"==typeof document)return;const s=document.elementFromPoint(t,i);s&&e(s)?s!==r&&(u(),a(s,n)):u()},a=(t,e)=>{r=t,o||(o=r);const n=r;Object(i.g)(()=>n.classList.add("ion-activated")),e()},u=(t=!1)=>{if(!r)return;const e=r;Object(i.g)(()=>e.classList.remove("ion-activated")),t&&o!==r&&r.click(),r=void 0};return Object(n.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>c(t.currentX,t.currentY,s.a),onMove:t=>c(t.currentX,t.currentY,s.b),onEnd:()=>{u(!0),Object(s.e)(),o=void 0}})}},fJnV:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var i=r("mrSG"),n=r("fXoL"),s=r("PLN7");let o=(()=>{class t{constructor(t){this.apiService=t}getMembers(){return Object(i.a)(this,void 0,void 0,(function*(){let t=null;try{t=yield this.apiService.memberGetProject({})}catch(r){if(403!==r.status)throw console.error(r),new Error("Failed to get projects: "+r.statusText);throw new Error(r.statusText)}const e=[];for(const i of t){const t=i.project_id,n=[];e.push({project_id:i.project_id,project_name:i.project_name,project_members:n});let s=null;try{s=yield this.apiService.memberGetGroup({project_id:t})}catch(r){if(403!==r.status)throw console.error(r),new Error(`Failed to get groups for project ${t}: ${r.statusText}`);throw new Error(r.statusText)}for(const e of s){const t=e.group_id,i=[];n.push({group_id:e.group_id,group_name:e.group_name,group_members:i});let s=null;try{s=yield this.apiService.memberGetUser({group_id:t})}catch(r){if(403!==r.status)throw console.error(r),new Error(`Failed to get users for group ${t}: ${r.statusText}`);throw new Error(r.statusText)}for(const e of s)i.push({user_id:e.user_id,user_email:e.user_email})}}return e}))}getUnassignedUsers(){return Object(i.a)(this,void 0,void 0,(function*(){let t=null;try{t=yield this.apiService.memberGetUnassignedUser({})}catch(r){if(403!==r.status)throw console.error(r),new Error("Failed to get unassigned users: "+r.statusText);throw new Error(r.statusText)}const e=[];for(const i of t)e.push(i);return t}))}addUsers(t,e){return Object(i.a)(this,void 0,void 0,(function*(){let r=null;try{r=yield this.apiService.memberAddUsers({group_id:t,user_ids:e})}catch(i){if(403!==i.status)throw console.error(i),new Error("Failed to add users to group: "+i.statusText);throw new Error(i.statusText)}}))}removeUser(t){return Object(i.a)(this,void 0,void 0,(function*(){let e=null;try{e=yield this.apiService.removeUser({user_id:t})}catch(r){if(403!==r.status)throw console.error(r),new Error("Failed to remove user from group: "+r.statusText);throw new Error(r.statusText)}}))}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(s.a))},t.\u0275prov=n.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},pRC4:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));var i=r("mrSG"),n=r("AytR"),s=r("fXoL"),o=r("PLN7"),c=r("NcIQ");const a=new TextEncoder,u=/^[0-9a-f]+$/;let d=(()=>{class t{constructor(t,e){this.apiService=t,this.settingsStoreService=e}bytesToHex(t){return Array.from(t).map(t=>t.toString(16).padStart(2,"0")).join("")}hash(t){return Object(i.a)(this,void 0,void 0,(function*(){return this.bytesToHex(new Uint8Array(yield window.crypto.subtle.digest(n.a.HASH_ALGORITHM,a.encode(t))))}))}hmac(t,e){return Object(i.a)(this,void 0,void 0,(function*(){return new Uint8Array(yield window.crypto.subtle.sign("HMAC",yield window.crypto.subtle.importKey("raw",a.encode(t),{name:"HMAC",hash:n.a.HASH_ALGORITHM},!1,["sign"]),a.encode(e)))}))}pbkdf2(t,e,r){return Object(i.a)(this,void 0,void 0,(function*(){return this.bytesToHex(new Uint8Array(yield window.crypto.subtle.deriveBits({name:"PBKDF2",hash:n.a.PASSWORD_ALGORITHM,salt:a.encode(e),iterations:r},yield window.crypto.subtle.importKey("raw",a.encode(t),"PBKDF2",!1,["deriveBits","deriveKey"]),8*n.a.PASSWORD_LENGTH)))}))}isLoggedIn(){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield this.settingsStoreService.fetchSessionId(),e=yield this.settingsStoreService.fetchSessionExpiration();return!!t&&e>Date.now()}))}submitLogin(t,e){return Object(i.a)(this,void 0,void 0,(function*(){const r=yield this.hash(t+n.a.HASH_SALT),i=this.bytesToHex(window.crypto.getRandomValues(new Uint8Array(n.a.NONCE_LENGTH)));let s=null;try{s=yield this.apiService.sessionLoginInit({email_hash:r,client_nonce:i})}catch(b){if(403!==b.status)throw console.error(b),new Error("Failed to send init message: "+b.statusText);throw new Error(b.statusText)}const o=s.server_nonce,c=s.client_salt,a=s.iterations,d=s.challenge_expiration;if(s.client_nonce!==i)throw new Error("Bad server response to init message: client nonce mismatch");if("string"!=typeof o||o.length!==2*n.a.NONCE_LENGTH||!u.test(o))throw new Error("Bad server response to init message: illegal server nonce");if("string"!=typeof c||c.length!==2*n.a.HASH_LENGTH||!u.test(c))throw new Error("Bad server response to init message: illegal client salt");if("number"!=typeof a||Math.round(a)!==a||a<n.a.ITERATIONS_MIN)throw new Error("Bad server response to init message: illegal iterations");if("number"!=typeof d||Math.round(d)!==d||d<0)throw new Error("Bad server response to init message: illegal expiration");const l=`${r},${i},${o},${c}`,h=yield this.pbkdf2(e,c,a),f=yield this.hmac(h,"Client Key"),p=yield this.hash(this.bytesToHex(f)),v=yield this.hmac(p,l);for(let t=0;t<n.a.HASH_LENGTH;t++)v[t]^=f[t];let y=null;try{y=yield this.apiService.sessionLoginFini({email_hash:r,client_nonce:i,server_nonce:o,iterations:a,challenge_expiration:d,client_proof:this.bytesToHex(v)})}catch(b){if(403!==b.status)throw console.error(b),new Error("Failed to send fini message: "+b.statusText);throw new Error(b.statusText)}const g=y.server_proof,m=y.session_id,w=y.admin;if("string"!=typeof g||g.length!==2*n.a.NONCE_LENGTH||!u.test(g))throw new Error("Bad server response to fini message: illegal server proof");if("string"!=typeof m||o.length!==2*n.a.NONCE_LENGTH||!u.test(m))throw new Error("Bad server response to init message: illegal sessionId");if("boolean"!=typeof w)throw new Error("Bad server response to init message: illegal admin flag");const S=this.bytesToHex(yield this.hmac(h,"Server Key"));if(g!==this.bytesToHex(yield this.hmac(S,l)))throw new Error("Bad server response to fini message: invalid server proof");if(!0!==w)throw new Error("Error: this account has no administrator privileges");return yield this.settingsStoreService.storeSessionId(m),yield this.settingsStoreService.storeAdmin(w),m}))}submitLogout(){return Object(i.a)(this,void 0,void 0,(function*(){let t=null;try{t=yield this.apiService.sessionLogout({})}catch(e){if(403!==e.status)throw console.error(e),new Error("Failed to send logout message: "+e.statusText);throw new Error(e.statusText)}finally{yield this.settingsStoreService.storeSessionId(""),yield this.settingsStoreService.storeSessionExpiration(Date.now()-1)}}))}}return t.\u0275fac=function(e){return new(e||t)(s.Qb(o.a),s.Qb(c.a))},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},sPtc:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return c}));const i=(t,e)=>null!==e.closest(t),n=(t,e)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,["ion-color-"+t]:!0},e):e,s=t=>{const e={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>e[t]=!0),e},o=/^[a-z][a-z0-9+\-.]*:/,c=async(t,e,r,i)=>{if(null!=t&&"#"!==t[0]&&!o.test(t)){const n=document.querySelector("ion-router");if(n)return null!=e&&e.preventDefault(),n.push(t,r,i)}return!1}}}]);